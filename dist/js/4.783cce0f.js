(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{129:function(t,a,e){"use strict";var n=e(83);e.n(n).a},130:function(t,a,e){"use strict";var n=e(84);e.n(n).a},79:function(t,a,e){"use strict";e.r(a);e(94),e(98),e(99),e(100),e(104),e(88),e(109),e(111),e(48),e(112),e(114),e(118),e(120);var n=e(121),i=e.n(n),r=e(131),s=(e(125),{props:{percentage:{type:Number,required:!0}},data:function(){return{}},computed:{computedStyles:function(){return{transform:"translateX(".concat(-100+this.percentage,"%)")}}},methods:{}}),o=(e(129),e(93)),c={components:{Loading:Object(o.a)(s,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"loading"},[e("div",{staticClass:"loading__bar"},[e("div",{staticClass:"loading__bar__line"}),t._v(" "),e("div",{staticClass:"loading__bar__line"}),t._v(" "),e("div",{staticClass:"loading__bar__line"}),t._v(" "),e("div",{staticClass:"loading__bar__line"}),t._v(" "),e("div",{staticClass:"loading__bar__mainline"},[e("div",{style:t.computedStyles})])])])},[],!1,null,"6048bb8c",null).exports},data:function(){return{updateTime:"",svg:null,leaf:null,channelData:[],tooltip:null,channelName:"",subscriberCount:"",viewCount:"",loadCount:0,showLoad:!0}},computed:{formatUpdateTime:function(){if(!this.updateTime)return"";var t=this.updateTime.getFullYear(),a=this.padStart(this.updateTime.getMonth()+1),e=this.padStart(this.updateTime.getDate()),n=this.padStart(this.updateTime.getHours()),i=this.padStart(this.updateTime.getMinutes());return"".concat(t,"/").concat(a,"/").concat(e," ").concat(n,":").concat(i)},percentage:function(){return Array.isArray(this.channelData)?this.loadCount/this.channelData.length*100:0}},watch:{loadCount:function(t){var a=this;Array.isArray(this.channelData)&&t===this.channelData.length&&(this.createChart(),setTimeout(function(){a.showLoad=!1},2e3))}},mounted:function(){var e=this;r.c("data.json").then(function(t){var a;(a=e.channelData).push.apply(a,i()(t.channels)),e.updateTime=new Date(t.updateTime),e.loadImage()}),window.addEventListener("resize",this.renderCircle)},beforeDestroy:function(){window.removeEventListener("resize",this.renderCircle)},methods:{padStart:function(t){return String(t).padStart(2,"0")},createChart:function(){this.tooltip=r.e(".tooltip"),this.svg=r.e(".app").append("svg").attr("width","100%").attr("height","calc(100% - 50px)"),this.svg.append("defs").selectAll(".flag").data(this.channelData).enter().append("pattern").attr("id",function(t){return t.id}).attr("width","100%").attr("height","100%").attr("patternContentUnits","objectBoundingBox").append("image").attr("width",1).attr("height",1).attr("preserveAspectRatio","xMidYMid slice").attr("xlink:href",function(t){return t.thumbnail}),this.renderCircle()},renderCircle:function(){var t=document.body.offsetWidth,a=document.body.offsetHeight-50,e=r.d().size([t-2,a-2]).padding(3)(r.b({children:this.channelData}).sum(function(t){return t.subscriberCount}));if(this.leaf)return this.leaf.data(e.leaves()).attr("transform",function(t){return"translate(".concat(t.x+1,",").concat(t.y+1,")")}),void this.leaf.select("circle").attr("r",function(t){return t.r});this.leaf=this.svg.selectAll("g").data(e.leaves()).join("g").attr("transform",function(t){return"translate(".concat(t.x+1,",").concat(t.y+1,")")}).on("mouseover",this.handleMouseOver).on("mouseout",this.handleMouseOut).on("click",this.handleClick),this.leaf.append("circle").attr("r",function(t){return t.r}).attr("fill",function(t){return"url(#".concat(t.data.id,")")}).style("cursor","pointer")},handleMouseOver:function(t){this.channelName=t.data.title,this.subscriberCount=r.a(",")(t.data.subscriberCount),this.viewCount=r.a(",")(t.data.viewCount);var a=t.y-t.r-83;a<=5&&(a=t.y+t.r+3);var e=Math.min(Math.max(t.x-115,5),document.body.offsetWidth-230-5);this.tooltip.transition().duration(200).style("opacity",1),this.tooltip.style("transform","translate(".concat(e,"px, ").concat(a,"px)"))},handleMouseOut:function(t){this.tooltip.transition().duration(500).style("opacity",0)},handleClick:function(t){window.open("https://www.youtube.com/channel/".concat(t.data.id))},loadImage:function(){var t=this,a=!0,e=!1,n=void 0;try{for(var i,r=this.channelData[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var s=i.value,o=new Image;o.src=s.thumbnail,o.onload=function(){t.loadCount++}}}catch(t){e=!0,n=t}finally{try{a||null==r.return||r.return()}finally{if(e)throw n}}}}},l=(e(130),Object(o.a)(c,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app"},[e("div",{staticClass:"update-time"},[t._v(t._s("> 更新日時 "+t.formatUpdateTime))]),t._v(" "),e("div",{staticClass:"tooltip"},[e("div",{staticClass:"channel-name"},[t._v(t._s(t.channelName))]),t._v(" "),e("div",{staticClass:"tooltip__rule"}),t._v(" "),e("div",{staticClass:"subscriber-count"},[t._v("登録数："+t._s(t.subscriberCount))]),t._v(" "),e("div",{staticClass:"view-count"},[t._v("再生数："+t._s(t.viewCount))])]),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.showLoad?e("loading",{attrs:{percentage:t.percentage}}):t._e()],1)],1)},[],!1,null,"a4d0253e",null));a.default=l.exports},83:function(t,a,e){},84:function(t,a,e){}}]);